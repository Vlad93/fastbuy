"use strict";

// How to Add Colors to JavaScript Console Outputs (Examples)  https://www.codingem.com/javascript-console-colors/
var AdvicesApiData = '';

if (BtnСalculator) {
  GetAllAdviceByApi();
}

function GetAllAdviceByApi() {
  var apiUrl = 'https://fastbuy365.by/wp-json/wp/v2/advice?_fields=id,meta&per_page=100';
  fetch(apiUrl).then(function (response) {
    return response.json();
  }).then(function (data) {
    // Обработка полученных данных
    AdvicesApiData = data;
    BtnСalculator.removeAttribute('disabled');
    BtnСalculator.textContent = 'Вывести пятно';
    console.log('AdvicesApiData =>', AdvicesApiData);
  })["catch"](function (error) {
    console.log('Ошибка при получении данных калькулятора:', error);
  });
}

function findAdvice(pollution, surface) {
  if (pollution.trim() === '' && surface.trim() === '') {
    return '';
  } // Check if pollution or surface is an empty string


  if (pollution.trim() === '' || surface.trim() === '') {
    console.log('%cError: pollution and surface cannot be empty.', 'color: red; font-size: larger');
    return '';
  }

  var desiredElement = '';

  if (AdvicesApiData === '') {
    return '';
  } else {
    desiredElement = AdvicesApiData.find(function (item) {
      return item.meta.pollution === pollution && item.meta.surface === surface;
    });

    if (desiredElement) {
      return desiredElement.meta;
    } else {
      console.log("%cЭлемент не найден.", 'color: red; font-size: larger');
      return '';
    }
  }
}

var SelTypePollution = document.getElementById('typePollution');
var SelTypeSurface = document.getElementById('typeSurface');
var BtnСalculator = document.querySelector('.btn-calc');
var tagAdvice = document.querySelector('.section-calculator__content-result');
var tagAdviceImage = document.getElementById('calculator-img');
var tagAdvicePosition = tagAdvice.getBoundingClientRect().top + window.scrollY - 120;
var calculatorPosition = document.querySelector('.section-calculator__wrap').getBoundingClientRect().top + window.scrollY - 100;
var TypePollutionValue = '',
    TypeSurfaceValue = '',
    AdviceHtml = '',
    CalcWarningMessage = '',
    MetaAdvice = '',
    ImgAdvice = '';
window.addEventListener("load", function () {
  if (BtnСalculator) {
    GetAllAdviceByApi();
    BtnСalculator.addEventListener('click', СalculatorSelectorsChange);
  }
});

function СalculatorSelectorsChange() {
  TypePollutionValue = SelTypePollution.value.trim();
  TypeSurfaceValue = SelTypeSurface.value.trim();

  if (TypePollutionValue === '' || TypeSurfaceValue === '') {
    CalcWarningMessage = 'Выберите тип загрязнения и тип поверхности';
  } else {
    CalcWarningMessage = '';
    MetaAdvice = findAdvice(TypePollutionValue, TypeSurfaceValue);
    AdviceHtml = MetaAdvice.adviceeng;
    ImgAdvice = MetaAdvice.advicefoto;
  }

  SetAdviceHtml();
}

function SetAdviceHtml() {
  BtnAdviceReadMode.classList.remove('advice-display-none');
  tagAdvice.classList.remove('advice-display-none');
  BtnAdviceHide.classList.add('advice-display-none');
  tagAdvice.innerHTML = AdviceHtml === '' ? '' : AdviceHtml;
  tagAdviceImage.src = ImgAdvice;
  tagAdviceImage.srcset = ImgAdvice;
  window.scrollTo({
    top: tagAdvicePosition,
    behavior: 'smooth'
  });
}

var BtnAdviceReadMode = document.querySelector('.calculator-show-more');
var BtnAdviceHide = document.querySelector('.calculator-reset');
tagAdvice.classList.add('advice-display-none');

function BtnAdviceReadModeOnClick() {
  BtnAdviceReadMode.classList.add('advice-display-none');
  tagAdvice.classList.add('full');
  BtnAdviceHide.classList.remove('advice-display-none');
}

function BtnAdviceHideOnClick() {
  window.scrollTo({
    top: calculatorPosition,
    behavior: 'smooth'
  });
  tagAdvice.classList.add('advice-display-none');
  tagAdvice.classList.remove('full');
  BtnAdviceHide.classList.add('advice-display-none');
}

if (BtnAdviceReadMode) {
  BtnAdviceReadMode.addEventListener('click', BtnAdviceReadModeOnClick);
}

if (BtnAdviceHide) {
  BtnAdviceHide.addEventListener('click', BtnAdviceHideOnClick);
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbGN1bGF0b3IuanMiXSwibmFtZXMiOlsiQWR2aWNlc0FwaURhdGEiLCJCdG7QoWFsY3VsYXRvciIsIkdldEFsbEFkdmljZUJ5QXBpIiwiYXBpVXJsIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwiZGF0YSIsInJlbW92ZUF0dHJpYnV0ZSIsInRleHRDb250ZW50IiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiZmluZEFkdmljZSIsInBvbGx1dGlvbiIsInN1cmZhY2UiLCJ0cmltIiwiZGVzaXJlZEVsZW1lbnQiLCJmaW5kIiwiaXRlbSIsIm1ldGEiLCJTZWxUeXBlUG9sbHV0aW9uIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIlNlbFR5cGVTdXJmYWNlIiwicXVlcnlTZWxlY3RvciIsInRhZ0FkdmljZSIsInRhZ0FkdmljZUltYWdlIiwidGFnQWR2aWNlUG9zaXRpb24iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJ3aW5kb3ciLCJzY3JvbGxZIiwiY2FsY3VsYXRvclBvc2l0aW9uIiwiVHlwZVBvbGx1dGlvblZhbHVlIiwiVHlwZVN1cmZhY2VWYWx1ZSIsIkFkdmljZUh0bWwiLCJDYWxjV2FybmluZ01lc3NhZ2UiLCJNZXRhQWR2aWNlIiwiSW1nQWR2aWNlIiwiYWRkRXZlbnRMaXN0ZW5lciIsItChYWxjdWxhdG9yU2VsZWN0b3JzQ2hhbmdlIiwidmFsdWUiLCJhZHZpY2VlbmciLCJhZHZpY2Vmb3RvIiwiU2V0QWR2aWNlSHRtbCIsIkJ0bkFkdmljZVJlYWRNb2RlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiQnRuQWR2aWNlSGlkZSIsImFkZCIsImlubmVySFRNTCIsInNyYyIsInNyY3NldCIsInNjcm9sbFRvIiwiYmVoYXZpb3IiLCJCdG5BZHZpY2VSZWFkTW9kZU9uQ2xpY2siLCJCdG5BZHZpY2VIaWRlT25DbGljayJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUVBLElBQUlBLGNBQWMsR0FBRyxFQUFyQjs7QUFDQSxJ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U0FBZCxDQUF3QkcsR0FBeEIsQ0FBNEIscUJBQTVCO0FBQ0Q7O0FBQ0QsSUFBR0osaUJBQUgsRUFBc0I7QUFDcEJBLEVBQUFBLGlCQUFpQixDQUFDTixnQkFBbEIsQ0FBbUMsT0FBbkMsRUFBNENnQix3QkFBNUM7QUFDRDs7QUFDRCxJQUFHUCxhQUFILEVBQWtCO0FBQ2hCQSxFQUFBQSxhQUFhLENBQUNULGdCQUFkLENBQStCLE9BQS9CLEVBQXdDaUIsb0JBQXhDO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBIb3cgdG8gQWRkIENvbG9ycyB0byBKYXZhU2NyaXB0IENvbnNvbGUgT3V0cHV0cyAoRXhhbXBsZXMpICBodHRwczovL3d3dy5jb2RpbmdlbS5jb20vamF2YXNjcmlwdC1jb25zb2xlLWNvbG9ycy9cblxudmFyIEFkdmljZXNBcGlEYXRhID0gJyc7XG5pZihCdG7QoWFsY3VsYXRvcikge1xuICBHZXRBbGxBZHZpY2VCeUFwaSgpO1xufVxuZnVuY3Rpb24gR2V0QWxsQWR2aWNlQnlBcGkoKSB7XG4gICAgY29uc3QgYXBpVXJsID0gJ2h0dHBzOi8vZmFzdGJ1eTM2NS5ieS93cC1qc29uL3dwL3YyL2FkdmljZT9fZmllbGRzPWlkLG1ldGEmcGVyX3BhZ2U9MTAwJztcbiAgICBmZXRjaChhcGlVcmwpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKS50aGVuKGRhdGEgPT4ge1xuICAgICAgICAvLyDQntCx0YDQsNCx0L7RgtC60LAg0L/QvtC70YPRh9C10L3QvdGL0YUg0LTQsNC90L3Ri9GFXG4gICAgICAgIEFkdmljZXNBcGlEYXRhID0gZGF0YTtcbiAgICAgICAgQnRu0KFhbGN1bGF0b3IucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICBCdG7QoWFsY3VsYXRvci50ZXh0Q29udGVudCA9ICfQktGL0LLQtdGB0YLQuCDQv9GP0YLQvdC+JztcbiAgICAgICAgY29uc29sZS5sb2coJ0FkdmljZXNBcGlEYXRhID0+JywgQWR2aWNlc0FwaURhdGEpO1xuICAgIH1cbiAgICApLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L/QvtC70YPRh9C10L3QuNC4INC00LDQvdC90YvRhSDQutCw0LvRjNC60YPQu9GP0YLQvtGA0LA6JywgZXJyb3IpO1xuICAgIH1cbiAgICApO1xufVxuXG5mdW5jdGlvbiBmaW5kQWR2aWNlKHBvbGx1dGlvbiwgc3VyZmFjZSkge1xuXG4gICAgaWYgKHBvbGx1dGlvbi50cmltKCkgPT09ICcnICYmIHN1cmZhY2UudHJpbSgpID09PSAnJykge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgcG9sbHV0aW9uIG9yIHN1cmZhY2UgaXMgYW4gZW1wdHkgc3RyaW5nXG4gICAgaWYgKHBvbGx1dGlvbi50cmltKCkgPT09ICcnIHx8IHN1cmZhY2UudHJpbSgpID09PSAnJykge1xuICAgICAgICBjb25zb2xlLmxvZygnJWNFcnJvcjogcG9sbHV0aW9uIGFuZCBzdXJmYWNlIGNhbm5vdCBiZSBlbXB0eS4nLCAnY29sb3I6IHJlZDsgZm9udC1zaXplOiBsYXJnZXInKTtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIGxldCBkZXNpcmVkRWxlbWVudCA9ICcnO1xuXG4gICAgaWYgKEFkdmljZXNBcGlEYXRhID09PSAnJykge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGVzaXJlZEVsZW1lbnQgPSBBZHZpY2VzQXBpRGF0YS5maW5kKGl0ZW0gPT4gaXRlbS5tZXRhLnBvbGx1dGlvbiA9PT0gcG9sbHV0aW9uICYmIGl0ZW0ubWV0YS5zdXJmYWNlID09PSBzdXJmYWNlKTtcbiAgICAgICAgaWYgKGRlc2lyZWRFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZGVzaXJlZEVsZW1lbnQubWV0YTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiJWPQrdC70LXQvNC10L3RgiDQvdC1INC90LDQudC00LXQvS5cIiwgJ2NvbG9yOiByZWQ7IGZvbnQtc2l6ZTogbGFyZ2VyJyk7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmxldCBTZWxUeXBlUG9sbHV0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R5cGVQb2xsdXRpb24nKTtcbmxldCBTZWxUeXBlU3VyZmFjZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eXBlU3VyZmFjZScpO1xubGV0IEJ0btChYWxjdWxhdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1jYWxjJyk7XG5sZXQgdGFnQWR2aWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tY2FsY3VsYXRvcl9fY29udGVudC1yZXN1bHQnKTtcbmxldCB0YWdBZHZpY2VJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWxjdWxhdG9yLWltZycpO1xuXG5jb25zdCB0YWdBZHZpY2VQb3NpdGlvbiA9IHRhZ0FkdmljZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB3aW5kb3cuc2Nyb2xsWSAtIDEyMDtcbmNvbnN0IGNhbGN1bGF0b3JQb3NpdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLWNhbGN1bGF0b3JfX3dyYXAnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB3aW5kb3cuc2Nyb2xsWSAtIDEwMDtcblxudmFyIFR5cGVQb2xsdXRpb25WYWx1ZSA9ICcnXG4gICwgVHlwZVN1cmZhY2VWYWx1ZSA9ICcnXG4gICwgQWR2aWNlSHRtbCA9ICcnXG4gICwgQ2FsY1dhcm5pbmdNZXNzYWdlID0gJydcbiAgLCBNZXRhQWR2aWNlID0gJydcbiAgLCBJbWdBZHZpY2UgPSAnJztcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xuICBpZihCdG7QoWFsY3VsYXRvcikge1xuICAgIEdldEFsbEFkdmljZUJ5QXBpKCk7XG4gICAgQnRu0KFhbGN1bGF0b3IuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCDQoWFsY3VsYXRvclNlbGVjdG9yc0NoYW5nZSk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiDQoWFsY3VsYXRvclNlbGVjdG9yc0NoYW5nZSgpIHtcbiAgICBUeXBlUG9sbHV0aW9uVmFsdWUgPSBTZWxUeXBlUG9sbHV0aW9uLnZhbHVlLnRyaW0oKTtcbiAgICBUeXBlU3VyZmFjZVZhbHVlID0gU2VsVHlwZVN1cmZhY2UudmFsdWUudHJpbSgpO1xuICAgIGlmIChUeXBlUG9sbHV0aW9uVmFsdWUgPT09ICcnIHx8IFR5cGVTdXJmYWNlVmFsdWUgPT09ICcnKSB7XG4gICAgICAgIENhbGNXYXJuaW5nTWVzc2FnZSA9ICfQktGL0LHQtdGA0LjRgtC1INGC0LjQvyDQt9Cw0LPRgNGP0LfQvdC10L3QuNGPINC4INGC0LjQvyDQv9C+0LLQtdGA0YXQvdC+0YHRgtC4JztcbiAgICB9IGVsc2Uge1xuICAgICAgICBDYWxjV2FybmluZ01lc3NhZ2UgPSAnJztcbiAgICAgICAgTWV0YUFkdmljZSA9IGZpbmRBZHZpY2UoVHlwZVBvbGx1dGlvblZhbHVlLCBUeXBlU3VyZmFjZVZhbHVlKTtcbiAgICAgICAgQWR2aWNlSHRtbCA9IE1ldGFBZHZpY2UuYWR2aWNlZW5nO1xuICAgICAgICBJbWdBZHZpY2UgPSBNZXRhQWR2aWNlLmFkdmljZWZvdG87XG4gICAgfVxuICAgIFNldEFkdmljZUh0bWwoKTtcbn1cbmZ1bmN0aW9uIFNldEFkdmljZUh0bWwoKSB7XG4gICAgQnRuQWR2aWNlUmVhZE1vZGUuY2xhc3NMaXN0LnJlbW92ZSgnYWR2aWNlLWRpc3BsYXktbm9uZScpO1xuICAgIHRhZ0FkdmljZS5jbGFzc0xpc3QucmVtb3ZlKCdhZHZpY2UtZGlzcGxheS1ub25lJyk7XG4gICAgQnRuQWR2aWNlSGlkZS5jbGFzc0xpc3QuYWRkKCdhZHZpY2UtZGlzcGxheS1ub25lJyk7XG5cbiAgICB0YWdBZHZpY2UuaW5uZXJIVE1MID0gKEFkdmljZUh0bWwgPT09ICcnKSA/ICcnIDogQWR2aWNlSHRtbDtcblxuICAgIHRhZ0FkdmljZUltYWdlLnNyYyA9IEltZ0FkdmljZTtcbiAgICB0YWdBZHZpY2VJbWFnZS5zcmNzZXQgPSBJbWdBZHZpY2U7XG4gICAgd2luZG93LnNjcm9sbFRvKHtcbiAgICAgIHRvcDogdGFnQWR2aWNlUG9zaXRpb24sXG4gICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICB9KTtcbn1cblxudmFyIEJ0bkFkdmljZVJlYWRNb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGN1bGF0b3Itc2hvdy1tb3JlJyk7XG52YXIgQnRuQWR2aWNlSGlkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxjdWxhdG9yLXJlc2V0Jyk7XG50YWdBZHZpY2UuY2xhc3NMaXN0LmFkZCgnYWR2aWNlLWRpc3BsYXktbm9uZScpO1xuXG5mdW5jdGlvbiBCdG5BZHZpY2VSZWFkTW9kZU9uQ2xpY2soKSB7XG4gICAgQnRuQWR2aWNlUmVhZE1vZGUuY2xhc3NMaXN0LmFkZCgnYWR2aWNlLWRpc3BsYXktbm9uZScpO1xuICAgIHRhZ0FkdmljZS5jbGFzc0xpc3QuYWRkKCdmdWxsJyk7XG4gICAgQnRuQWR2aWNlSGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdhZHZpY2UtZGlzcGxheS1ub25lJyk7XG59XG5mdW5jdGlvbiBCdG5BZHZpY2VIaWRlT25DbGljaygpIHtcbiAgd2luZG93LnNjcm9sbFRvKHtcbiAgICB0b3A6IGNhbGN1bGF0b3JQb3NpdGlvbixcbiAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgfSk7XG4gIHRhZ0FkdmljZS5jbGFzc0xpc3QuYWRkKCdhZHZpY2UtZGlzcGxheS1ub25lJyk7XG4gIHRhZ0FkdmljZS5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsJyk7XG4gIEJ0bkFkdmljZUhpZGUuY2xhc3NMaXN0LmFkZCgnYWR2aWNlLWRpc3BsYXktbm9uZScpO1xufVxuaWYoQnRuQWR2aWNlUmVhZE1vZGUpIHtcbiAgQnRuQWR2aWNlUmVhZE1vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBCdG5BZHZpY2VSZWFkTW9kZU9uQ2xpY2spO1xufVxuaWYoQnRuQWR2aWNlSGlkZSkge1xuICBCdG5BZHZpY2VIaWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgQnRuQWR2aWNlSGlkZU9uQ2xpY2spO1xufVxuXG5cbiJdLCJmaWxlIjoiY2FsY3VsYXRvci5qcyJ9
