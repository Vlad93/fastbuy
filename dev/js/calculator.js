"use strict";

// How to Add Colors to JavaScript Console Outputs (Examples)  https://www.codingem.com/javascript-console-colors/
var AdvicesApiData = '';
var BtnСalculator = document.querySelector('.btn-calc');

if (BtnСalculator) {
  var GetAllAdviceByApi = function GetAllAdviceByApi() {
    var apiUrl = 'https://fastbuy365.by/wp-json/wp/v2/advice?_fields=id,meta&per_page=100';
    fetch(apiUrl).then(function (response) {
      return response.json();
    }).then(function (data) {
      // Обработка полученных данных
      AdvicesApiData = data;
      BtnСalculator.removeAttribute('disabled');
      BtnСalculator.textContent = 'Вывести пятно';
      console.log('AdvicesApiData =>', AdvicesApiData);
    })["catch"](function (error) {
      console.log('Ошибка при получении данных калькулятора:', error);
    });
  };

  var findAdvice = function findAdvice(pollution, surface) {
    if (pollution.trim() === '' && surface.trim() === '') {
      return '';
    } // Check if pollution or surface is an empty string


    if (pollution.trim() === '' || surface.trim() === '') {
      console.log('%cError: pollution and surface cannot be empty.', 'color: red; font-size: larger');
      return '';
    }

    var desiredElement = '';

    if (AdvicesApiData === '') {
      return '';
    } else {
      desiredElement = AdvicesApiData.find(function (item) {
        return item.meta.pollution === pollution && item.meta.surface === surface;
      });

      if (desiredElement) {
        return desiredElement.meta;
      } else {
        console.log("%cЭлемент не найден.", 'color: red; font-size: larger');
        return '';
      }
    }
  };

  var СalculatorSelectorsChange = function СalculatorSelectorsChange() {
    TypePollutionValue = SelTypePollution.value.trim();
    TypeSurfaceValue = SelTypeSurface.value.trim();

    if (TypePollutionValue === '' || TypeSurfaceValue === '') {
      CalcWarningMessage = 'Выберите тип загрязнения и тип поверхности';
    } else {
      CalcWarningMessage = '';
      MetaAdvice = findAdvice(TypePollutionValue, TypeSurfaceValue);
      AdviceHtml = MetaAdvice.adviceeng;
      ImgAdvice = MetaAdvice.advicefoto;
    }

    SetAdviceHtml();
  };

  var SetAdviceHtml = function SetAdviceHtml() {
    BtnAdviceReadMode.classList.remove('advice-display-none');
    tagAdvice.classList.remove('advice-display-none');
    BtnAdviceHide.classList.add('advice-display-none');
    tagAdvice.innerHTML = AdviceHtml === '' ? '' : AdviceHtml;
    tagAdviceImage.src = ImgAdvice;
    tagAdviceImage.srcset = ImgAdvice;
    window.scrollTo({
      top: tagAdvicePosition,
      behavior: 'smooth'
    });
  };

  var BtnAdviceReadModeOnClick = function BtnAdviceReadModeOnClick() {
    BtnAdviceReadMode.classList.add('advice-display-none');
    tagAdvice.classList.add('full');
    BtnAdviceHide.classList.remove('advice-display-none');
  };

  var BtnAdviceHideOnClick = function BtnAdviceHideOnClick() {
    window.scrollTo({
      top: calculatorPosition,
      behavior: 'smooth'
    });
    tagAdvice.classList.add('advice-display-none');
    tagAdvice.classList.remove('full');
    BtnAdviceHide.classList.add('advice-display-none');
  };

  GetAllAdviceByApi();
  var SelTypePollution = document.getElementById('typePollution');
  var SelTypeSurface = document.getElementById('typeSurface');
  var tagAdvice = document.querySelector('.section-calculator__content-result');
  var tagAdviceImage = document.getElementById('calculator-img');
  var tagAdvicePosition = tagAdvice.getBoundingClientRect().top + window.scrollY - 120;
  var calculatorPosition = document.querySelector('.section-calculator__wrap').getBoundingClientRect().top + window.scrollY - 100;
  var TypePollutionValue = '',
      TypeSurfaceValue = '',
      AdviceHtml = '',
      CalcWarningMessage = '',
      MetaAdvice = '',
      ImgAdvice = '';
  window.addEventListener("load", function () {
    if (BtnСalculator) {
      GetAllAdviceByApi();
      BtnСalculator.addEventListener('click', СalculatorSelectorsChange);
    }
  });
  var BtnAdviceReadMode = document.querySelector('.calculator-show-more');
  var BtnAdviceHide = document.querySelector('.calculator-reset');
  tagAdvice.classList.add('advice-display-none');

  if (BtnAdviceReadMode) {
    BtnAdviceReadMode.addEventListener('click', BtnAdviceReadModeOnClick);
  }

  if (BtnAdviceHide) {
    BtnAdviceHide.addEventListener('click', BtnAdviceHideOnClick);
  }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbGN1bGF0b3IuanMiXSwibmFtZXMiOlsiQWR2aWNlc0FwaURhdGEiLCJCdG7QoWFsY3VsYXRvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIkdldEFsbEFkdmljZUJ5QXBpIiwiYXBpVXJsIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwiZGF0YSIsInJlbW92ZUF0dHJpYnV0ZSIsInRleHRDb250ZW50IiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiZmluZEFkdmljZSIsInBvbGx1dGlvbiIsInN1cmZhY2UiLCJ0cmltIiwiZGVzaXJlZEVsZW1lbnQiLCJmaW5kIiwiaXRlbSIsIm1ldGEiLCLQoWFsY3VsYXRvclNlbGVjdG9yc0NoYW5nZSIsIlR5cGVQb2xsdXRpb25WYWx1ZSIsIlNlbFR5cGVQb2xsdXRpb24iLCJ2YWx1ZSIsIlR5cGVTdXJmYWNlVmFsdWUiLCJTZWxUeXBlU3VyZmFjZSIsIkNhbGNXYXJuaW5nTWVzc2FnZSIsIk1ldGFBZHZpY2UiLCJBZHZpY2VIdG1sIiwiYWR2aWNlZW5nIiwiSW1nQWR2aWNlIiwiYWR2aWNlZm90byIsIlNldEFkdmljZUh0bWwiLCJCdG5BZHZpY2VSZWFkTW9kZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRhZ0FkdmljZSIsIkJ0bkFkdmljZUhpZGUiLCJhZGQiLCJpbm5lckhUTUwiLCJ0YWdBZHZpY2VJbWFnZSIsInNyYyIsInNyY3NldCIsIndpbmRvdyIsInNjcm9sbFRvIiwidG9wIiwidGFnQWR2aWNlUG9zaXRpb24iLCJiZWhhdmlvciIsIkJ0bkFkdmljZVJlYWRNb2RlT25DbGljayIsIkJ0bkFkdmljZUhpZGVPbkNsaWNrIiwiY2FsY3VsYXRvclBvc2l0aW9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJzY3JvbGxZIiwiYWRkRXZlbnRMaXN0ZW5lciJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUVBLElBQUlBLGNBQWMsR0FBRyxFQUFyQjtBQUNBLElB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eEM7QUFDRDtBQUNGLEdBTEQ7QUFtQ0EsTUFBSWEsaUJBQWlCLEdBQUduQyxRQUFRLENBQUNDLGFBQVQsQ0FBdUIsdUJBQXZCLENBQXhCO0FBQ0EsTUFBSXNDLGFBQWEsR0FBR3ZDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixtQkFBdkIsQ0FBcEI7QUFDQXFDLEVBQUFBLFNBQVMsQ0FBQ0YsU0FBVixDQUFvQkksR0FBcEIsQ0FBd0IscUJBQXhCOztBQWdCQSxNQUFHTCxpQkFBSCxFQUFzQjtBQUNwQkEsSUFBQUEsaUJBQWlCLENBQUNxQixnQkFBbEIsQ0FBbUMsT0FBbkMsRUFBNENOLHdCQUE1QztBQUNEOztBQUNELE1BQUdYLGFBQUgsRUFBa0I7QUFDaEJBLElBQUFBLGFBQWEsQ0FBQ2lCLGdCQUFkLENBQStCLE9BQS9CLEVBQXdDTCxvQkFBeEM7QUFDRDtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSG93IHRvIEFkZCBDb2xvcnMgdG8gSmF2YVNjcmlwdCBDb25zb2xlIE91dHB1dHMgKEV4YW1wbGVzKSAgaHR0cHM6Ly93d3cuY29kaW5nZW0uY29tL2phdmFzY3JpcHQtY29uc29sZS1jb2xvcnMvXG5cbnZhciBBZHZpY2VzQXBpRGF0YSA9ICcnO1xubGV0IEJ0btChYWxjdWxhdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1jYWxjJyk7XG5pZihCdG7QoWFsY3VsYXRvcikge1xuICBHZXRBbGxBZHZpY2VCeUFwaSgpO1xuXG5mdW5jdGlvbiBHZXRBbGxBZHZpY2VCeUFwaSgpIHtcbiAgICBjb25zdCBhcGlVcmwgPSAnaHR0cHM6Ly9mYXN0YnV5MzY1LmJ5L3dwLWpzb24vd3AvdjIvYWR2aWNlP19maWVsZHM9aWQsbWV0YSZwZXJfcGFnZT0xMDAnO1xuICAgIGZldGNoKGFwaVVybCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIC8vINCe0LHRgNCw0LHQvtGC0LrQsCDQv9C+0LvRg9GH0LXQvdC90YvRhSDQtNCw0L3QvdGL0YVcbiAgICAgICAgQWR2aWNlc0FwaURhdGEgPSBkYXRhO1xuICAgICAgICBCdG7QoWFsY3VsYXRvci5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgIEJ0btChYWxjdWxhdG9yLnRleHRDb250ZW50ID0gJ9CS0YvQstC10YHRgtC4INC/0Y/RgtC90L4nO1xuICAgICAgICBjb25zb2xlLmxvZygnQWR2aWNlc0FwaURhdGEgPT4nLCBBZHZpY2VzQXBpRGF0YSk7XG4gICAgfVxuICAgICkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygn0J7RiNC40LHQutCwINC/0YDQuCDQv9C+0LvRg9GH0LXQvdC40Lgg0LTQsNC90L3Ri9GFINC60LDQu9GM0LrRg9C70Y/RgtC+0YDQsDonLCBlcnJvcik7XG4gICAgfVxuICAgICk7XG59XG5cbmZ1bmN0aW9uIGZpbmRBZHZpY2UocG9sbHV0aW9uLCBzdXJmYWNlKSB7XG5cbiAgICBpZiAocG9sbHV0aW9uLnRyaW0oKSA9PT0gJycgJiYgc3VyZmFjZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBwb2xsdXRpb24gb3Igc3VyZmFjZSBpcyBhbiBlbXB0eSBzdHJpbmdcbiAgICBpZiAocG9sbHV0aW9uLnRyaW0oKSA9PT0gJycgfHwgc3VyZmFjZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCclY0Vycm9yOiBwb2xsdXRpb24gYW5kIHN1cmZhY2UgY2Fubm90IGJlIGVtcHR5LicsICdjb2xvcjogcmVkOyBmb250LXNpemU6IGxhcmdlcicpO1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgbGV0IGRlc2lyZWRFbGVtZW50ID0gJyc7XG5cbiAgICBpZiAoQWR2aWNlc0FwaURhdGEgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgICBkZXNpcmVkRWxlbWVudCA9IEFkdmljZXNBcGlEYXRhLmZpbmQoaXRlbSA9PiBpdGVtLm1ldGEucG9sbHV0aW9uID09PSBwb2xsdXRpb24gJiYgaXRlbS5tZXRhLnN1cmZhY2UgPT09IHN1cmZhY2UpO1xuICAgICAgICBpZiAoZGVzaXJlZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNpcmVkRWxlbWVudC5tZXRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCIlY9Ct0LvQtdC80LXQvdGCINC90LUg0L3QsNC50LTQtdC9LlwiLCAnY29sb3I6IHJlZDsgZm9udC1zaXplOiBsYXJnZXInKTtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH1cbn1cblxubGV0IFNlbFR5cGVQb2xsdXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHlwZVBvbGx1dGlvbicpO1xubGV0IFNlbFR5cGVTdXJmYWNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R5cGVTdXJmYWNlJyk7XG5sZXQgdGFnQWR2aWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tY2FsY3VsYXRvcl9fY29udGVudC1yZXN1bHQnKTtcbmxldCB0YWdBZHZpY2VJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWxjdWxhdG9yLWltZycpO1xuXG5jb25zdCB0YWdBZHZpY2VQb3NpdGlvbiA9IHRhZ0FkdmljZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB3aW5kb3cuc2Nyb2xsWSAtIDEyMDtcbmNvbnN0IGNhbGN1bGF0b3JQb3NpdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLWNhbGN1bGF0b3JfX3dyYXAnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB3aW5kb3cuc2Nyb2xsWSAtIDEwMDtcblxudmFyIFR5cGVQb2xsdXRpb25WYWx1ZSA9ICcnXG4gICwgVHlwZVN1cmZhY2VWYWx1ZSA9ICcnXG4gICwgQWR2aWNlSHRtbCA9ICcnXG4gICwgQ2FsY1dhcm5pbmdNZXNzYWdlID0gJydcbiAgLCBNZXRhQWR2aWNlID0gJydcbiAgLCBJbWdBZHZpY2UgPSAnJztcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xuICBpZihCdG7QoWFsY3VsYXRvcikge1xuICAgIEdldEFsbEFkdmljZUJ5QXBpKCk7XG4gICAgQnRu0KFhbGN1bGF0b3IuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCDQoWFsY3VsYXRvclNlbGVjdG9yc0NoYW5nZSk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiDQoWFsY3VsYXRvclNlbGVjdG9yc0NoYW5nZSgpIHtcbiAgICBUeXBlUG9sbHV0aW9uVmFsdWUgPSBTZWxUeXBlUG9sbHV0aW9uLnZhbHVlLnRyaW0oKTtcbiAgICBUeXBlU3VyZmFjZVZhbHVlID0gU2VsVHlwZVN1cmZhY2UudmFsdWUudHJpbSgpO1xuICAgIGlmIChUeXBlUG9sbHV0aW9uVmFsdWUgPT09ICcnIHx8IFR5cGVTdXJmYWNlVmFsdWUgPT09ICcnKSB7XG4gICAgICAgIENhbGNXYXJuaW5nTWVzc2FnZSA9ICfQktGL0LHQtdGA0LjRgtC1INGC0LjQvyDQt9Cw0LPRgNGP0LfQvdC10L3QuNGPINC4INGC0LjQvyDQv9C+0LLQtdGA0YXQvdC+0YHRgtC4JztcbiAgICB9IGVsc2Uge1xuICAgICAgICBDYWxjV2FybmluZ01lc3NhZ2UgPSAnJztcbiAgICAgICAgTWV0YUFkdmljZSA9IGZpbmRBZHZpY2UoVHlwZVBvbGx1dGlvblZhbHVlLCBUeXBlU3VyZmFjZVZhbHVlKTtcbiAgICAgICAgQWR2aWNlSHRtbCA9IE1ldGFBZHZpY2UuYWR2aWNlZW5nO1xuICAgICAgICBJbWdBZHZpY2UgPSBNZXRhQWR2aWNlLmFkdmljZWZvdG87XG4gICAgfVxuICAgIFNldEFkdmljZUh0bWwoKTtcbn1cbmZ1bmN0aW9uIFNldEFkdmljZUh0bWwoKSB7XG4gICAgQnRuQWR2aWNlUmVhZE1vZGUuY2xhc3NMaXN0LnJlbW92ZSgnYWR2aWNlLWRpc3BsYXktbm9uZScpO1xuICAgIHRhZ0FkdmljZS5jbGFzc0xpc3QucmVtb3ZlKCdhZHZpY2UtZGlzcGxheS1ub25lJyk7XG4gICAgQnRuQWR2aWNlSGlkZS5jbGFzc0xpc3QuYWRkKCdhZHZpY2UtZGlzcGxheS1ub25lJyk7XG5cbiAgICB0YWdBZHZpY2UuaW5uZXJIVE1MID0gKEFkdmljZUh0bWwgPT09ICcnKSA/ICcnIDogQWR2aWNlSHRtbDtcblxuICAgIHRhZ0FkdmljZUltYWdlLnNyYyA9IEltZ0FkdmljZTtcbiAgICB0YWdBZHZpY2VJbWFnZS5zcmNzZXQgPSBJbWdBZHZpY2U7XG4gICAgd2luZG93LnNjcm9sbFRvKHtcbiAgICAgIHRvcDogdGFnQWR2aWNlUG9zaXRpb24sXG4gICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICB9KTtcbn1cblxudmFyIEJ0bkFkdmljZVJlYWRNb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGN1bGF0b3Itc2hvdy1tb3JlJyk7XG52YXIgQnRuQWR2aWNlSGlkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxjdWxhdG9yLXJlc2V0Jyk7XG50YWdBZHZpY2UuY2xhc3NMaXN0LmFkZCgnYWR2aWNlLWRpc3BsYXktbm9uZScpO1xuXG5mdW5jdGlvbiBCdG5BZHZpY2VSZWFkTW9kZU9uQ2xpY2soKSB7XG4gICAgQnRuQWR2aWNlUmVhZE1vZGUuY2xhc3NMaXN0LmFkZCgnYWR2aWNlLWRpc3BsYXktbm9uZScpO1xuICAgIHRhZ0FkdmljZS5jbGFzc0xpc3QuYWRkKCdmdWxsJyk7XG4gICAgQnRuQWR2aWNlSGlkZS5jbGFzc0xpc3QucmVtb3ZlKCdhZHZpY2UtZGlzcGxheS1ub25lJyk7XG59XG5mdW5jdGlvbiBCdG5BZHZpY2VIaWRlT25DbGljaygpIHtcbiAgd2luZG93LnNjcm9sbFRvKHtcbiAgICB0b3A6IGNhbGN1bGF0b3JQb3NpdGlvbixcbiAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgfSk7XG4gIHRhZ0FkdmljZS5jbGFzc0xpc3QuYWRkKCdhZHZpY2UtZGlzcGxheS1ub25lJyk7XG4gIHRhZ0FkdmljZS5jbGFzc0xpc3QucmVtb3ZlKCdmdWxsJyk7XG4gIEJ0bkFkdmljZUhpZGUuY2xhc3NMaXN0LmFkZCgnYWR2aWNlLWRpc3BsYXktbm9uZScpO1xufVxuaWYoQnRuQWR2aWNlUmVhZE1vZGUpIHtcbiAgQnRuQWR2aWNlUmVhZE1vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBCdG5BZHZpY2VSZWFkTW9kZU9uQ2xpY2spO1xufVxuaWYoQnRuQWR2aWNlSGlkZSkge1xuICBCdG5BZHZpY2VIaWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgQnRuQWR2aWNlSGlkZU9uQ2xpY2spO1xufVxufVxuIl0sImZpbGUiOiJjYWxjdWxhdG9yLmpzIn0=
